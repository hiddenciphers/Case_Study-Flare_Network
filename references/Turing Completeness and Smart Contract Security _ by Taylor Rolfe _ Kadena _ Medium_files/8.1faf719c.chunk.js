(self.webpackChunklite=self.webpackChunklite||[]).push([[8],{66802:(e,n,t)=>{"use strict";t.d(n,{R4:()=>r,Ue:()=>a,xG:()=>o,Hp:()=>l});var i=t(93661),r=function(e,n,t){var i,r;return"undefined"!=typeof window&&e&&n&&!!(window.ApplePaySession&&null!==(i=window.ApplePaySession)&&void 0!==i&&i.supportsVersion(t)&&null!==(r=window.ApplePaySession)&&void 0!==r&&r.canMakePayments())},a=function(e){return e===i.FM.Monthly?"monthly":"yearly"};function o(e){var n=e.amount,t=e.currency,i=e.locale,r=e.floatingDigits,a=void 0===r?[2,2]:r,o=e.isLongFormat,l=void 0!==o&&o,s=i||"undefined"!=typeof window&&window.navigator.language||"en-US",c=t||"USD";if(!Intl)return"".concat(n," ").concat(c);var d=n%1!=0;try{var u=new Intl.NumberFormat(s,{style:"currency",currency:c,minimumFractionDigits:d&&a[1]>0?a[1]:a[0],maximumFractionDigits:a[1],currencyDisplay:"narrowSymbol"}).format(n);return l?"".concat(u," ").concat(t):u}catch(e){return String(n)}}var l=function(e,n,t){var i=String(e);return t?"".concat(i," ").concat(n):i}},19308:(e,n,t)=>{"use strict";t.d(n,{b:()=>l,I:()=>s});var i=t(319),r=t.n(i),a=t(68216),o=t(98007),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionFollowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionFollowButton_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_collection"}}]}}].concat(r()(a.nf.definitions),r()(o.Os.definitions))}},76107:(e,n,t)=>{"use strict";t.d(n,{b:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MembershipUpsellModal_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},31579:(e,n,t)=>{"use strict";t.d(n,{DI:()=>a,nj:()=>o});var i=t(319),r=t.n(i),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat(r()(a.definitions))};[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat(r()(a.definitions))},93661:(e,n,t)=>{"use strict";t.d(n,{FM:()=>r,kr:()=>d,OS:()=>u});var i,r,a,o=t(59713),l=t.n(o),s=t(66802);!function(e){e.Monthly="monthly",e.Yearly="yearly",e.YearlyCrossout="yearlyCrossout",e.YearlyStaff="yearlyStaff",e.YearlyPriceSaved="yearlyPriceSaved",e.YearlyStaffPriceSaved="YearlyStaffPriceSaved",e.FiftyPercentOffOneYearDiscountPrice="FiftyPercentOffOneYearDiscountPrice",e.FiftyPercentOffOneYearDiscountCrossoutPrice="FiftyPercentOffOneYearDiscountCrossoutPrice",e.FiftyPercentOffOneYearDiscountSavedMembershipPrice="FiftyPercentOffOneYearDiscountSavedMembershipPrice"}(r||(r={})),function(e){e[e.NoDiscount=0]="NoDiscount",e[e.FiftyPercentOffOneYear=1]="FiftyPercentOffOneYear"}(a||(a={}));var c={plan:(i={},l()(i,r.Monthly,5),l()(i,r.Yearly,50),l()(i,r.YearlyCrossout,60),l()(i,r.YearlyStaff,1),l()(i,r.YearlyPriceSaved,10),l()(i,r.YearlyStaffPriceSaved,49),l()(i,r.FiftyPercentOffOneYearDiscountPrice,25),l()(i,r.FiftyPercentOffOneYearDiscountCrossoutPrice,50),l()(i,r.FiftyPercentOffOneYearDiscountSavedMembershipPrice,25),i),currency:"USD"},d=function(e){var n=e.membershipType,t=c.currency,i=c.plan[n||r.Yearly];if(!i)throw new Error("Unavailable membership price");return{amount:i,currency:t}},u=function(e){var n=e.membershipType,t=e.excludeCurrencySign,i=void 0!==t&&t,r=e.isLongFormat,a=void 0!==r&&r,o=d({membershipType:n}),l=o.amount,c=o.currency;return i?(0,s.Hp)(l,c,a):(0,s.xG)({amount:l,currency:c,floatingDigits:[0,0],isLongFormat:a})}},67701:(e,n,t)=>{"use strict";t.d(n,{gY:()=>c});var i=t(28655),r=t.n(i),a=t(64718),o=t(92471);function l(){var e=r()(["\n  query CollectionViewerEdge($collectionId: ID!) {\n    collection(id: $collectionId) {\n      ... on Collection {\n        id\n        viewerEdge {\n          ...Collection_viewerEdge\n        }\n      }\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function s(){var e=r()(["\n  fragment Collection_viewerEdge on CollectionViewerEdge {\n    id\n    canEditOwnPosts\n    canEditPosts\n    isEditor\n    isFollowing\n    isMuting\n    isSubscribedToLetters\n    isSubscribedToMediumNewsletter\n    isSubscribedToEmails\n    isWriter\n  }\n"]);return s=function(){return e},e}var c=function(e){var n,t,i=(0,a.a)(u,{variables:{collectionId:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""},ssr:!1,skip:!(null!=e&&e.id)}),r=i.loading,o=i.error,l=i.data;return r?{loading:r}:o?{error:o}:{viewerEdge:null==l||null===(t=l.collection)||void 0===t?void 0:t.viewerEdge}},d=(0,o.Ps)(s()),u=(0,o.Ps)(l(),d)},25267:(e,n,t)=>{"use strict";t.d(n,{I:()=>r});var i=t(6443),r=function(e){var n=e.children,t=e.nonBlocking,r=(0,i.H)(),a=r.error,o=r.loading,l=r.value;return t&&(a||o)?n(null):o?null:n(l)}},43822:(e,n,t)=>{"use strict";t.d(n,{H:()=>S,a:()=>h});var i=t(28655),r=t.n(i),a=t(59713),o=t.n(a),l=t(92471),s=t(67294),c=t(27517),d=t(47230),u=t(93310),m=t(18627),v=t(66411),p=t(50458);function f(){var e=r()(["\n  fragment UpsellClickable_post on Post {\n    id\n    collection {\n      id\n    }\n    sequence {\n      sequenceId\n    }\n    creator {\n      id\n    }\n  }\n"]);return f=function(){return e},e}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=(0,l.Ps)(f()),h=(0,c.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var n=e.authDomain,t=e.buttonSize,i=e.buttonStyle,r=e.children,a=e.eventData,o=void 0===a?{}:a,l=e.inline,c=void 0!==l&&l,f=e.isButton,b=void 0!==f&&f,S=e.linkStyle,h=void 0===S?"SUBTLE":S,w=e.post,y=e.redirectUrl,g=e.width,E=e.id,N=e.onClick,F=y||(0,p.OA)(n),P=(0,m.Av)(),O=(0,v.Lk)(),D=function(){var e,n;P.event("upsell.clicked",k(k({},o),{},{dimension:null==O?void 0:O.dimension,locationId:null==O?void 0:O.dimension,postId:null==w?void 0:w.id,authorId:null==w||null===(e=w.creator)||void 0===e?void 0:e.id,sequenceId:(null==w||null===(n=w.sequence)||void 0===n?void 0:n.sequenceId)||""}))};return b?s.createElement(d.z,{buttonStyle:i,href:F,onClick:function(){null==N||N(),D()},size:t,width:g,id:E},r):s.createElement(u.r,{onClick:function(){null==N||N(),D()},href:F,linkStyle:h,inline:c,id:E},r)}))},24330:(e,n,t)=>{"use strict";t.d(n,{N:()=>c});var i=t(63038),r=t.n(i),a=t(67294),o=t(32317),l=t(69116),s=t(77355),c=function(e){var n=e.creator,t=e.followButtonSize,i=void 0===t?"REGULAR":t,c=e.shouldHideTooltip,d=void 0!==c&&c,u=e.post,m=e.showMembershipUpsellModal,v=e.susiEntry,p=e.isVisible,f=e.width,b=e.isSubscribeCompact,k=void 0!==b&&b,S=a.useState(!1),h=r()(S,2),w=h[0],y=h[1];return a.createElement(a.Fragment,null,a.createElement(o.Bv,{buttonSize:i,onClick:function(){n.viewerEdge.isFollowing||y(!0)},post:u,user:n,susiEntry:v,width:f}),a.createElement(s.x,{marginLeft:k?"4px":"8px"},a.createElement(l.X,{user:n,showMembershipUpsellModal:m,showPostFollowSubscribeTooltip:w&&!d,hidePostFollowSubscribeTooltip:function(){return y(!1)},isVisible:p,isCompact:k})))}},27048:(e,n,t)=>{"use strict";t.d(n,{W:()=>o});var i=t(319),r=t.n(i),a=t(68216),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvatar_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"mediumMemberAt"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}].concat(r()(a.$m.definitions))}},69116:(e,n,t)=>{"use strict";t.d(n,{X:()=>le,w:()=>se});var i=t(28655),r=t.n(i),a=t(63038),o=t.n(a),l=t(92471),s=t(67294),c=t(21919),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserPostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdatePostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}}]}}]}}]},u=t(6443),m=t(14818),v=t(13791),p=t(77355),f=t(54945),b=t(87691),k=t(18627),S=t(66411),h=t(43487),w=t(87498),y=t(78870),g=t(50458),E="after_subscribe_membership_upsell",N=function(e){var n=e.user,t=e.isVisible,i=e.hide,r=(0,h.v9)((function(e){return e.config.authDomain})),a=(0,k.Av)(),l=(0,u.H)(),N=l.value,F=l.loading;s.useEffect((function(){var e;F||null!=N&&N.postSubscribeMembershipUpsellShownAt||(a.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:E}),O())}),[F]);var P=(0,c.D)(d,{optimisticResponse:{userUpdatePostSubscribeMembershipUpsellShownAt:{__typename:"User",id:(null==N?void 0:N.id)||"",postSubscribeMembershipUpsellShownAt:(new Date).getTime()}}}),O=o()(P,1)[0];return s.createElement(S.cW,{source:{name:E}},s.createElement(v.v,{isVisible:t,hide:i,withCloseButton:!0,withAnimation:!0,buttonStyle:"STRONG",buttonSize:"REGULAR",cancelText:"Not now",confirmText:"Become a member",onConfirm:function(){var e,t;a.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:E}),t=(0,y.Rk)((0,g.c5)(r),{subscribeToUserId:n.id,source:E}),window.location.href=t},showCancelButton:!0,isDestructiveAction:!1},s.createElement(p.x,{marginBottom:"24px"},s.createElement(m.z,{miroId:n.imageId||w.gG,alt:n.name||"",diameter:80,freezeGifs:!1})),s.createElement(p.x,{marginBottom:{xs:"8px",sm:"8px",md:"16px",lg:"16px",xl:"16px"}},s.createElement(f.H2,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},"Youâ€™re subscribed to get email updates. Become a member for more.")),s.createElement(p.x,{marginBottom:"32px"},s.createElement(b.F,{tag:"span",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Your membership fee directly supports ",n.name," and other writers you read. Get full access to every story on Medium."))))},F=t(76107),P=t(77280),O=t(61279),D=t(93661),M=t(98863),V=t(26350),x=t(43822),C=t(47230),U=t(73917),_=t(26244),T=t(1383),I=t(14646),A=t(31889),R=t(34135),B=t(97217),Y=t(78285);function L(){return(L=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var j=s.createElement("path",{d:"M14 7.29L15.6 9 18 6M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),G=s.createElement("path",{d:"M6 8.44l5.27 3.87 1.4-1.06.7-.52"});const H=function(e){return s.createElement("svg",L({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),j,G)};function z(){return(z=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var W=s.createElement("path",{d:"M24 13l2 2 3-3.5M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),q=s.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const $=function(e){return s.createElement("svg",z({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),W,q)};function K(){return(K=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var X=s.createElement("path",{d:"M14.58 6.89h3.92M16.39 9V5.08M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),J=s.createElement("path",{d:"M6 8.44l5.27 3.87 2.81-2.11"});const Q=function(e){return s.createElement("svg",K({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),X,J)};function Z(){return(Z=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var ee=s.createElement("rect",{x:26.25,y:9.25,width:.5,height:6.5,rx:.25}),ne=s.createElement("rect",{x:29.75,y:12.25,width:.5,height:6.5,rx:.25,transform:"rotate(90 29.75 12.25)"}),te=s.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),ie=s.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const re=function(e){return s.createElement("svg",Z({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),ee,ne,te,ie)};var ae=t(68894);function oe(){var e=r()(["\n  fragment UserSubscribeButton_user on User {\n    id\n    isPartnerProgramEnrolled\n    name\n    viewerEdge {\n      id\n      isFollowing\n      isUser\n    }\n    viewerIsUser\n    newsletterV3 {\n      id\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n    ...useNewsletterV3Subscription_user\n    ...MembershipUpsellModal_user\n  }\n  ","\n  ","\n  ","\n"]);return oe=function(){return e},e}var le=function(e){var n=e.user,t=e.showMembershipUpsellModal,i=void 0!==t&&t,r=e.showPostFollowSubscribeTooltip,a=void 0!==r&&r,l=e.hidePostFollowSubscribeTooltip,c=e.isVisible,d=void 0===c||c,m=e.isCompact,v=void 0!==m&&m,f=s.useRef(null),w=(0,I.I)(),E=(0,A.F)(),F=(0,u.H)().value,L=(0,ae.O)(!1),j=o()(L,3),G=j[0],z=j[1],W=j[2],q=n.newsletterV3,K=(0,Y.w)(),X=(0,k.Av)(),J=(0,S.pK)(),Z=(0,S.Qi)(),ee=(0,P.PM)(),ne=(0,O.oT)({newsletterV3:q,creator:n,newsletterName:n.name||void 0}),te=ne.isSubscribed,ie=ne.hasError,oe=ne.loading,le=ne.setSubscribe,se=(0,h.v9)((function(e){return e.config.authDomain})),ce=(0,y.Rk)((0,g.c5)(se),{subscribeToUserId:n.id,source:Z}),de=!(null==F||!F.mediumMemberAt),ue=s.useState(!1),me=o()(ue,2),ve=me[0],pe=me[1],fe=s.useState(!1),be=o()(fe,2),ke=be[0],Se=be[1],he=(0,S.P7)(ee||"").susiEntry,we=void 0===he?"":he,ye=["newsletter_v3_promo","writer_subscription_landing"].includes(we),ge=["newsletter_v3_promo"].includes(we),Ee=(0,D.OS)({membershipType:D.FM.Monthly}),Ne=!1,Fe=function(){var e;!Ne&&d&&Pe()&&(X.event("newsletterV3.subscribePresented",{newsletterV3Id:(null===(e=n.newsletterV3)||void 0===e?void 0:e.id)||"",source:J}),Ne=!0)},Pe=function(){var e;if(!f.current)return!1;var n=null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};s.useEffect((function(){return Fe(),window&&R.V6.on("scroll",Fe),function(){R.V6.off("scroll",Fe)}}),[]),s.useEffect((function(){Fe()}),[d]);var Oe=(0,ae.O)(!1),De=o()(Oe,3),Me=De[0],Ve=De[1],xe=De[2],Ce=function(e,n){var t=(0,u.H)(),i=t.value,r=t.loading,a=s.useRef(null),o=!(null==i||!i.mediumMemberAt),l=(0,P.PM)(),c=(0,S.P7)(l||"").susiEntry,d=["newsletter_v3_promo","writer_subscription_landing","subscribe_user"].includes(void 0===c?"":c);if(r)return!1;if(null!==a.current)return a.current;var m=d&&!o&&!e.viewerEdge.isUser&&!!e.isPartnerProgramEnrolled&&!(null!=i&&i.postSubscribeMembershipUpsellShownAt);return a.current=m,m}(n),Ue=s.useState(!1),_e=o()(Ue,2),Te=_e[0],Ie=_e[1];s.useEffect((function(){i&&te&&!Te&&Ce?Ve():xe()}),[te,Te,Ce]),s.useEffect((function(){ee&&!Ce&&ye&&te&&(!ge&&Z===we||ge)&&K({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:n.name,newsletterType:B.Rr.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return le(!1)}}})}),[ee,te]),s.useEffect((function(){if(te&&ke&&q){var e=!de&&!!n.isPartnerProgramEnrolled;e&&X.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:q.id,source:Z}),pe(e),Se(!1)}}),[te,ke,q]);var Ae=(0,M.f)().isWorkingPreview;if(ie||n.viewerEdge.isUser&&!Ae)return null;var Re,Be=te?"OBVIOUS":"STRONG",Ye=function(e,n){return function(t){return{stroke:n?t.baseColor.background.normal:e,height:v?"23px":"36px",width:v?"23px":"36px"}}},Le=w(Ye(E.accentColor.fill.normal,oe)),je=w(Ye(E.accentColor.background,oe));Re=te?v?s.createElement(H,{className:Le}):s.createElement($,{className:Le}):v?s.createElement(Q,{className:je}):s.createElement(re,{className:je});var Ge=s.createElement(C.z,{loading:oe,buttonStyle:Be,onClick:function(){var e;Se(!te),F?te?le(!1):F&&F.allowEmailAddressSharingEditorWriter?le(!0,!1):z():null!==(e=n.newsletterV3)&&void 0!==e&&e.id?X.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.newsletterV3.id,source:Z}):X.event("user.LOSubscribeClicked",{targetUserId:n.id,source:Z})},padding:"0","aria-label":"Subscribe"},Re),He=function(){return s.createElement(p.x,{padding:"14px 12px 20px",maxWidth:"220px"},s.createElement(b.F,{tag:"div",scale:"S",color:"DARKER"},s.createElement("strong",null,"You're subscribed to ",n.name,". Become a member for more.")," Get full access to every story on Medium for ",Ee," a month."),s.createElement(p.x,{paddingTop:"8px"},s.createElement(x.a,{isButton:!0,buttonStyle:"STRONG",buttonSize:"SMALL",redirectUrl:ce,width:"150px",onClick:function(){X.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:q.id,source:Z})}},s.createElement(p.x,{textAlign:"center"},s.createElement(b.F,{scale:"S",color:"WHITE"},"Become a member")))))},ze=function(){return s.createElement(p.x,{padding:"10px 12px",maxWidth:"166px"},s.createElement(b.F,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",n.name," publishes."))},We=function(e){var n=e.children;return s.createElement(U.J,{isVisible:!!l&&!te,hide:l,placement:"bottom",popoverRenderFn:ze,targetDistance:10,role:"tooltip"},n)},qe=function(e){var n=e.children;return s.createElement(U.J,{isVisible:!oe&&ve,hide:function(){return pe(!1)},placement:"bottom",popoverRenderFn:He,targetDistance:10,role:"tooltip"},n)},$e=function(e){var n=e.children;return s.createElement(_.$,{isVisible:!oe&&!te,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:ze,role:"tooltip",targetDistance:10},n)},Ke=function(e){var n=e.children;return a&&!te?s.createElement(We,null,n):ve?s.createElement(qe,null,n):s.createElement($e,null,n)};return s.createElement("div",{ref:f},s.createElement(Ke,null,s.createElement(p.x,null,F&&s.createElement(T.Q,{onConfirm:function(){le(!0,!0)},isVisible:G,hide:W,titleText:"Confirm your subscription to ".concat(n.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),F?Ge:s.createElement(V.R,{operation:"register",newsletterV3:q,user:n,actionUrl:q?(0,g.Zu)(q.id):(0,g.lc)(n.id),susiEntry:"subscribe_user"},Ge))),Me&&s.createElement(N,{user:n,isVisible:Me,hide:function(){Ie(!0),xe()}}))},se=(0,l.Ps)(oe(),O.DI,O.nj,F.b)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/8.1faf719c.chunk.js.map