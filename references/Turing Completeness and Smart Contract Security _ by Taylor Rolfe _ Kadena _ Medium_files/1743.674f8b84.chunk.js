(self.webpackChunklite=self.webpackChunklite||[]).push([[1743],{59250:(e,t,n)=>{"use strict";n.d(t,{MA:()=>l,Zh:()=>u,jM:()=>c});var o=n(63038),i=n.n(o),r=n(67294),s={mutedAuthorIds:[],setMutedAuthorIds:function(){},mutedPubIds:[],setMutedPubIds:function(){},dismissedPostIds:[],setDismissedPostIds:function(){},isMutingFromHomeFeed:!0,seeLessPostIds:[],setSeeLessPostIds:function(){}},l=function(e,t,n,o,i){return e.filter((function(e){var r,s,l=null==e?void 0:e.post;return!!l&&!(t.includes(null===(r=l.creator)||void 0===r?void 0:r.id)||n.includes(null===(s=l.collection)||void 0===s?void 0:s.id)||o.includes(l.id)||i.includes(l.id))}))},d=(0,r.createContext)(s),u=function(e){var t=e.children,n=(0,r.useState)(s.mutedAuthorIds),o=i()(n,2),l=o[0],u=o[1],c=(0,r.useState)(s.mutedPubIds),a=i()(c,2),v=a[0],m=a[1],p=(0,r.useState)(s.dismissedPostIds),f=i()(p,2),h=f[0],g=f[1],P=(0,r.useState)(s.seeLessPostIds),I=i()(P,2),E=I[0],w=I[1],S=s.isMutingFromHomeFeed;return r.createElement(d.Provider,{value:{mutedAuthorIds:l,setMutedAuthorIds:u,mutedPubIds:v,setMutedPubIds:m,dismissedPostIds:h,setDismissedPostIds:g,isMutingFromHomeFeed:S,seeLessPostIds:E,setSeeLessPostIds:w}},t)},c=function(){return(0,r.useContext)(d)}},91743:(e,t,n)=>{"use strict";n.d(t,{t:()=>z});var o=n(67294),i=n(41802),r=n(6443),s=n(67701),l=n(66227),d=n(67154),u=n.n(d),c=n(59713),a=n.n(c),v=n(63038),m=n.n(v),p=n(65331),f=n(17778),h=n(93774),g=n(38352),P=n(37774),I=n(77355),E=n(93310),w=n(73917),S=n(66411),b=n(75221),k=n(77280),A=n(43487);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var M=o.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),x=o.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const y=function(e){return o.createElement("svg",O({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),M,x)};var C=n(68894),F=n(319),L=n.n(F),j=n(5977),D=n(59250),R=n(75880),T=n(18627),U=function(e){var t=e.creatorId,n=e.muteAuthor,i=e.hidePopover,r=e.eventData,s=e.isActiveExpandedPost,l=e.unfollowUser,d=(0,S.pK)(),u=(0,T.Av)(),c={id:t||""},a=(0,R.Pd)(c).viewerEdge,v=!(null==a||!a.isFollowing),m=!(null==a||!a.isMuting),p=(0,j.k6)(),f=(0,D.jM)(),h=f.mutedAuthorIds,P=f.setMutedAuthorIds,I=f.isMutingFromHomeFeed,w=o.useCallback((function(e){P([].concat(L()(h),[e]))}),[h]);return t?v?o.createElement(g.Sl,null,o.createElement(E.r,{onClick:function(){u.event("user.unfollowed",{targetUserId:t,source:d}),l(),i()}},"Unfollow this author")):m?null:o.createElement(g.Sl,null,o.createElement(E.r,{onClick:function(){u.event("user.muted",r),n(),I&&(w(t),s&&p.goBack()),i()}},"Mute this author")):null},B=n(24415),H=n(75150),_=function(e){var t=e.collectionId,n=e.hidePopover,i=e.mutePub,r=e.eventData,l=e.isActiveExpandedPost,d=e.unfollowCollection,u=(0,T.Av)(),c=(0,S.pK)(),a={id:t||""},v=(0,s.gY)(a).viewerEdge,m=!(null==v||!v.isFollowing),p=!(null==v||!v.isMuting),f=(0,D.jM)(),h=f.mutedPubIds,P=f.setMutedPubIds,I=f.isMutingFromHomeFeed,w=(0,j.k6)(),b=o.useCallback((function(e){P([].concat(L()(h),[e]))}),[h]);return t?m?o.createElement(g.Sl,null,o.createElement(E.r,{onClick:function(){u.event("collection.unfollowed",{collectionId:t,followSource:c}),d(),n()}},"Unfollow this publication")):p?null:o.createElement(g.Sl,null,o.createElement(E.r,{onClick:function(){u.event("collection.muted",r),i(),I&&(b(t),l&&w.goBack()),n()}},"Mute this publication")):null},N=n(42732);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e){var t=e.post,n=e.creatorId,i=e.collectionId,r=e.isActiveExpandedPost,s=e.setDismissedPostId,l=e.isResponsive,d=e.hideNegativeSignalItem,c=e.popoverPositioningStrategy,a=e.hideAddToList,v=void 0===a||a,O=e.viewer,M=e.hideOnScroll,x=t.id,F=(0,C.O)(!1),L=m()(F,4),j=L[0],D=L[2],R=L[3],T=null==O?void 0:O.id,K=(0,h.l)(n,i),Y=K.muteAuthor,z=K.mutePub,Q=(0,f.l)(n,i),V=Q.unfollowUser,W=Q.unfollowCollection,Z=(0,S.pK)(),J=(0,k.PM)(),X=(0,A.v9)((function(e){return e.navigation.referrer})),q=(0,A.v9)((function(e){return e.navigation.currentLocation})),$={postId:x,location:q,referrer:X,source:Z,referrerSource:J},ee=(0,N.c)({post:t,onShowLess:D,isActiveExpandedPost:r,collectionId:i,setDismissedPostId:s}).handleShowLess,te={kind:b.ej.POST,target:t},ne=(0,o.useCallback)((function(e){return o.createElement(g.mX,null,!d&&o.createElement(I.x,{borderBottom:"BASE_LIGHTER",paddingBottom:"4px",marginBottom:"4px"},o.createElement(g.Sl,null,o.createElement(E.r,{onClick:ee,"aria-label":"Show less like this"},o.createElement(I.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},o.createElement(I.x,{marginRight:"4px"},o.createElement(y,null)),o.createElement(I.x,null,"Show less like this"))))),!v&&o.createElement(g.Sl,null,o.createElement(E.r,{"aria-controls":"aria-id","aria-expanded":"false",onClick:function(){D(),e()}},"Add to list")),o.createElement(H.T,{post:t,hidePopover:D}),o.createElement(U,{creatorId:n,muteAuthor:Y,isActiveExpandedPost:r,hidePopover:D,eventData:G({targetUserId:n},$),unfollowUser:V}),i&&o.createElement(_,{collectionId:i,mutePub:z,isActiveExpandedPost:r,hidePopover:D,eventData:G({collection:i},$),unfollowCollection:W}),o.createElement(P.z,{postId:x,viewerId:T,targetUserId:n||"",shouldShowShortenedCopy:!0,hidePopover:D}))}),[]);return n?o.createElement(p.a,u()({},te,{viewer:O}),(function(e){var t=e.onClick;return o.createElement(w.J,{isVisible:j,positioningStrategy:c,targetDistance:10,hide:D,popoverRenderFn:function(){return ne(t)},hideOnScroll:M},o.createElement(B.c,{onClick:R,"aria-label":"More options",isResponsive:l,tooltipText:"More"}))})):null},z=function(e){var t=e.post,n=e.isActiveExpandedPost,d=e.setDismissedPostId,u=e.isResponsive,c=e.hideNegativeSignalItem,a=e.popoverPositioningStrategy,v=e.hideAddToList,m=void 0===v||v,p=e.hideOnScroll,f=t.creator,h=t.collection,g=(0,r.H)(),P=g.loading,I=g.value,E=(0,s.gY)(h).viewerEdge,w=!P&&!!I,S=!(null==E||!E.isEditor),b=(null==I?void 0:I.id)===(null==f?void 0:f.id);return f&&w?S||b?o.createElement(l.B,null,(function(e){var n=e.show;return o.createElement(i.Z,{post:t,showLoadingIndicator:n,isResponsive:u,popoverPositioningStrategy:a,hideAddToList:m,hideOnScroll:p})})):o.createElement(Y,{post:t,creatorId:f.id,collectionId:null==h?void 0:h.id,isActiveExpandedPost:n,setDismissedPostId:d,isResponsive:u,hideNegativeSignalItem:c,popoverPositioningStrategy:a,hideAddToList:m,viewer:I,hideOnScroll:p}):null}},42732:(e,t,n)=>{"use strict";n.d(t,{c:()=>P});var o=n(319),i=n.n(o),r=n(82492),s=n.n(r),l=n(26075),d=n(90386),u=n(67294),c=n(5977),a=n(59250),v=n(25550),m=n(18627),p=n(66411),f=n(78285),h=n(77280),g=n(43487),P=function(e){var t=e.post,n=e.onShowLess,o=e.isActiveExpandedPost,r=e.collectionId,P=e.setDismissedPostId,I=t.id,E=(0,v.r)().viewerId,w=(0,c.k6)(),S=(0,a.jM)(),b=S.setSeeLessPostIds,k=S.isMutingFromHomeFeed,A=(0,f.w)(),O=(0,l.x)().cache,M=(0,m.Av)(),x=(0,p.pK)(),y=(0,h.PM)(),C=(0,g.v9)((function(e){return e.navigation.referrer})),F=(0,g.v9)((function(e){return e.navigation.currentLocation})),L=(0,u.useRef)(null),j=(0,u.useCallback)((function(){L.current=window.setTimeout((function(){M.event("post.see_less",{userId:E,collection:r,postId:I,location:F,referrer:C,source:x,referrerSource:y})}),3e3)}),[]),D=(0,u.useCallback)((function(){null!==L.current&&window.clearTimeout(L.current)}),[]),R=(0,u.useCallback)((function(){O.modify({id:O.identify((0,d.kQ)("ROOT_QUERY")),fields:{webRecommendedFeed:function(e,t){var n=t.readField;return s()({},e,{items:e.items.filter((function(e){return(null==e?void 0:e.post)&&n("id",e.post)!==I}))})},intentionalFeed:function(e,t){var n=t.readField;return s()({},e,{items:e.items.filter((function(e){return!("HomeFeedItem"===(null==e?void 0:e.__typename)&&null!=e&&e.post&&n("id",e.post)===I)}))})}}})}),[I]);return{handleShowLess:(0,u.useCallback)((function(){j(),R(),k&&(b((function(e){return[].concat(i()(e),[I])})),o&&w.goBack(),null==P||P(I)),A({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:D}}),null==n||n()}),[])}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1743.674f8b84.chunk.js.map